# lefthook configuration
# Git hooks management for the my-blog-with-claude-code project

pre-commit:
  parallel: false
  commands:
    format:
      run: pnpm run format
      stage_fixed: true
      fail_text: 'Formatting files...'
      skip:
        - merge
        - rebase
    lint:
      run: pnpm turbo lint
      fail_text: 'Linting failed. Please fix errors before committing.'
      skip:
        - merge
        - rebase
    check-types:
      run: pnpm turbo check-types
      fail_text: 'Type checking failed. Please fix type errors before committing.'
      skip:
        - merge
        - rebase

commit-msg:
  commands:
    commitlint:
      run: npx commitlint --edit $1
      fail_text: 'Commit message format is invalid. Please follow conventional commit format.'

pre-push:
  parallel: false
  commands:
    format-check:
      run: pnpm run format:check
      fail_text: 'Code is not properly formatted. Please run "pnpm run format" before pushing.'
      skip:
        - merge
        - rebase
    lint:
      run: pnpm turbo lint
      fail_text: 'Linting failed. Please fix errors before pushing.'
      skip:
        - merge
        - rebase
    check-types:
      run: pnpm turbo check-types
      fail_text: 'Type checking failed. Please fix type errors before pushing.'
      skip:
        - merge
        - rebase
    test:
      run: pnpm turbo test
      fail_text: 'Tests failed. Please fix failing tests before pushing.'
      skip:
        - merge
        - rebase
    build:
      run: pnpm turbo build
      fail_text: 'Build failed. Please fix build errors before pushing.'
      skip:
        - merge
        - rebase
    markuplint:
      run: pnpm run markuplint
      fail_text: 'Markuplint validation failed. Please fix HTML/JSX markup issues before pushing.'
      skip:
        - merge
        - rebase

# Colors for better visibility
colors: true

# Skip lefthook execution in CI/CD environments
skip_in_ci: true
